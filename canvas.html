<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>canvas画板</title>
    <link rel="stylesheet" href="./css/style.css">
</head>

<body>
    <canvas id="xxx" width="1000" height="600">
    </canvas>
    <div id=actions class="actions">
        <button id=eraser>橡皮擦</button>
        <button id=brush>画笔</button>
    </div>
<<<<<<< HEAD
    <script src="./js/main.js"></script>
=======
    
    <script>
        /*--------------------上面部分主要是对画板的设置--------------------*/
        var yyy = document.getElementById('xxx');
        var context = yyy.getContext('2d');
        autoSetCanvas(yyy)
        listenToMouse(yyy)



        /*--------------------------↓下面部分主要是橡皮擦设置---------------------------------*/

        var eraserEnabled = false
        eraser.onclick = function () {
            //将变量转化至反向值
           // eraserEnabled = !eraserEnabled
           eraserEnabled = true
           actions.className = 'actions x'
        }
        
        brush.onclick =  function(){
            eraserEnabled = false
            actions.className = 'actions'
        }


        /*--------------------------------自动设置窗口------------------------------------*/
        function autoSetCanvas(canvas) {
            //获取屏幕宽度
            setCanvasSize()

            window.onresize = function () {
                setCanvasSize()
            }

            function setCanvasSize() {
                var pageWidth = document.documentElement.clientWidth
                var pageHeight = document.documentElement.clientHeight

                canvas.width = pageWidth
                canvas.height = pageHeight
            }
        }


        /*------------------------------------↓ 画线-------------------------------------------*/

        function drawLine(x1, y1, x2, y2) {
            context.beginPath()

            context.lineWidth = 4
            context.strokeStyle = 'black'
            context.moveTo(x1, y1)
            context.lineTo(x2, y2)
            context.stroke()
            context.closePath()
        }


        /*-------------------------------↓下面部分主要是监听鼠标事件---------------------------------*/
        function listenToMouse(canvas) {

            /*       
            context.fillStyle = 'blue';
            context.fillRect(10,10,100,100);    
            context.strokeStyle = 'white';
            context.strokeRect(10,10,100,100)

            context.fillStyle = 'red';
            context.beginPath();
            context.moveTo(240,240);
            context.lineTo(300,240);
            context.lineTo(300,300);
            context.fill()

            //如何画一个圆弧
            //如果这里不写描边颜色，则以最后一次的描边颜色设置，填充也是如此。
            context.fillStyle = 'red'
            context.strokeStyle = 'white'
            context.beginPath()
            //绘画区域,以x轴方向500，y方向300为坐标，以100单位为半径，以(π/180)*你想要的度数为起点，0度的起点在3点方向，以(π/180)*你想要的度数为终点画圆。
            context.arc(500,300,100,Math.PI/180*270,Math.PI/180*0) 
            context.stroke()
            */


            function drawCircle(x, y, radius) {
                context.beginPath()
                //绘画区域,以x轴方向500，y方向300为坐标，以100单位为半径，以(π/180)*你想要的度数为起点，0度的起点在3点方向，以(π/180)*你想要的度数为终点画圆。
                context.arc(x, y, radius, 0, Math.PI * 2)
                context.fill()
            }
            //声明是否在画
            var using = false
            var lastPoint = { x: undefined, y: undefined }

            canvas.onmousedown = function (aaa) {
                var x = aaa.clientX
                var y = aaa.clientY
                using = true
                if (eraserEnabled) {
                    context.clearRect(x - 5, y - 5, 10, 10)
                } else {
                    lastPoint = {
                        x: x,
                        y: y
                    }
                    // drawCircle(x,y,0)
                }
            }

            canvas.onmousemove = function (aaa) {
                var x = aaa.clientX
                var y = aaa.clientY
                // drawCircle(x,y,0)
                //要实时更新上一个点的位置。
                if (!using) { return }

                if (eraserEnabled) {
                    context.clearRect(x - 5, y - 5, 10, 10)
                } else {
                    var newPoint = { x: x, y: y }
                    drawLine(lastPoint.x, lastPoint.y, newPoint.x, newPoint.y)
                    lastPoint = newPoint
                    // drawCircle(x,y,0)
                }
            }
            canvas.onmouseup = function (aaa) {
                using = false
            }
        }




    </script>

>>>>>>> c9df3f34109030fdca0689e989e5b849272619eb
</body>

</html>